# 修复同一子目录下多个工具，重启后只保留一个的问题

## 问题描述

当用户在同一子目录下添加多个工具后，程序重启时只保留其中一个工具，其他工具信息丢失。

## 问题原因

1. **工具识别机制问题**：原始代码只扫描到目录级别，没有深入扫描子目录中的多个工具文件。
2. **重复工具检测逻辑过于严格**：使用工具路径作为唯一标识符，导致同一目录下的多个工具被误认为是重复工具。
3. **工具添加逻辑缺陷**：使用路径作为唯一标识符，阻止了同一目录下多个工具的添加。

## 修复方案

### 1. 修改Tool结构体
- 添加`UniqueID`字段，用于唯一标识工具
- `UniqueID`使用"路径+文件名"的组合作为唯一标识符

### 2. 更新扫描逻辑
- 增强`ScanToolsInPath`和`ScanToolsInCustomPath`函数
- 深入扫描每个工具目录下的可执行文件
- 为每个可执行文件创建独立的工具条目

### 3. 修改重复工具检测逻辑
- 更新`CleanupDuplicateTools`函数
- 使用"路径+文件名"作为唯一标识符，而不是仅使用路径
- 这样同一目录下的多个工具文件不会被误认为是重复工具

### 4. 更新工具添加逻辑
- 更新`GetNewToolsFromScanned`和`AutoAddScannedTools`函数
- 使用"路径+文件名"作为唯一标识符
- 确保同一目录下的多个工具都能被正确添加

## 修复效果

修复后，同一子目录下的多个工具将：
1. 被正确识别并添加到配置中
2. 在程序重启后完整保留
3. 不会影响现有工具功能
4. 不会改变工具加载顺序
5. 保持原有性能水平

## 技术细节

- 使用`generateToolUniqueID`函数生成唯一标识符
- 添加`setExecutionTypeByFileName`函数根据文件扩展名设置执行类型
- 保持向后兼容性，不影响现有工具